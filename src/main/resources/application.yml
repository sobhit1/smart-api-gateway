server:
  port: 8080
  netty:
    connection-timeout: 2s
  shutdown: graceful

spring:
  application:
    name: smart-api-gateway
  threads:
    virtual:
      enabled: true
  main:
    keep-alive: true
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 1s
      lettuce:
        pool:
          max-active: 50
          max-idle: 10
          min-idle: 2
          max-wait: 500ms
  cloud:
    gateway:
      routes:
        - id: catch-all
          uri: no://op  # Dummy URI, GlobalFilter will override this
          predicates:
            - Path=/**

gateway-config:
  global-timeout: 3s

projects:
  shop:
    prefix: /shop
    target-url: https://smart-city-tracker-backend.onrender.com
    timeout: 2s
    
    auth-type: JWT
    jwt-public-key: ${SHOP_JWT_PUBLIC_KEY}
    jwt-secret: ${SHOP_JWT_SECRET}
    
    public-paths:
      - /shop/auth/login
      - /shop/auth/register
      - /shop/public/**
      - /shop/actuator/**

    rate-limit:
      capacity: 10
      refill-rate: 10
      
  cms:
    prefix: /cms
    target-url: http://localhost:8082
    timeout: 5s
    
    auth-type: SESSION
    session-cookie: SESSION_ID
    csrf-required: true
    
    public-paths:
      - /cms/auth/login
      
    rate-limit:
      capacity: 5
      refill-rate: 2